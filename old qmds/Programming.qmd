---
title: "Programming"
format: html
editor: visual
code-fold: true
code-summary: "Show the code"
---

## My Coding Portfolio

This page highlights my coding experience in **R** and **Python**, showcasing analytical workflows, spatial analysis, and automation.

This first code snippit is from a project that analyzed the fire burn severity and post-fire vegetation recovery using Landsat time-series.

Summer 2017 was considered as one the worst wild fire season in BC (until 2023), with over 1.2 million ha of burned areas, 65,000 people displaced and \$649 million spent on fire suppression.

The Prouton Lakes fire (fire ID C30870) burned part of the Alex Fraser Research Forest (AFRF) located near Williams Lake, BC, on the traditional, ancestral and unceded territory of the T’exelcemc, Xatsu’ll and Esket First Nations. The burn severity varied from low-severity ground fire to high-severity canopy fire.

```{r} 
df <- data.frame(
  band_n = 1:7,
  band_name = c("Band 1 - Coastal aerosol",
                "Band 2 - Blue",
                "Band 3 - Green",
                "Band 4 - Red",
                "Band 5 - Near Infrared (NIR)",
                "Band 6 - SWIR 1",
                "Band 7 - SWIR 2"),
  wave_range = c("0.43-0.45",
                 "0.45-0.51",
                 "0.53-0.59",
                 "0.64-0.67",
                 "0.85-0.88",
                 "1.57-1.65",
                 "2.11-2.29")
)
knitr::kable(df)
```

```{r}
knitr::opts_chunk$set(echo = TRUE)

# Create output directory if it doesn't exist
if (!dir.exists("output")) dir.create("output", showWarnings = FALSE)
```

# Burn Severity Analysis

This snippet demonstrates the calculation of the differenced Normalized Burn Ratio (dNBR):

```{r}
# calculate the dNBR
dNBR <- pre_fire_nbr - post_fire_nbr

# define the classification
reclass_df <- matrix(c(-0.2, 0.15, 1,
                       0.15, 0.25, 2,
                       0.25, 0.3, 3,
                       0.3, 1.0, 4), ncol = 3, byrow = TRUE)


# reclassify dNBR into the severity classes
burn_severity <- classify(dNBR, reclass_df)

# set the burn severity for the matrix ids 1:4
levels(burn_severity) <- data.frame(
  id = 1:4,
  label = c("unburned", "low severity", "medium severity", "high severity"))

# plot burn severity with the Prouton Fire Extent with legend
plot(burn_severity, col = c("darkgreen", "yellow", "orange", "red"),
     main = "Burn Severity of the Prouton Lakes Fire")
plot(prouton_fire, add = TRUE, border = "black", lwd = 2, col = NA)
```

# Output Burn Severity Map

Here’s the final burn severity map, showing the Prouton Lakes fire extent and classified burn severity levels:

```{r}
plot(burn_severity, col = c("darkgreen", "yellow", "orange", "red"),
     main = "Burn Severity of the Prouton Lakes Fire")
plot(st_geometry(prouton_fire), add = TRUE, border = "black", lwd = 2, col = NA)
```

